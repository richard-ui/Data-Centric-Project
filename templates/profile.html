{% extends "base.html" %}
{% block content %}

    <div class="title-style">
        <h1> {{ username }}'s Recipes</h1>
    </div>

<!-- Dropdown Trigger -->
  <a class="dropdown-trigger btn" href="#dropdown1" data-target="dropdown1">Drop Me!</a>

  <!-- Dropdown Structure -->
  <ul id="dropdown1" class="dropdown-content">
    <li><a href="#!">one</a></li>
    <li><a href="#!">two</a></li>
    <li class="divider" tabindex="-1"></li>
    <li><a href="#!">three</a></li>
    <li><a href="#!"><i class="material-icons">view_module</i>four</a></li>
    <li><a href="#!"><i class="material-icons">cloud</i>five</a></li>
  </ul>

{% for recipe in recipes %}
{% if session.user|lower == recipe.user_id|lower %}
<div class="card-panel yellow lighten-2">
             <form>
             <fieldset>
             <legend>{{ recipe.recipe_name }}</legend>
                <div class="row">
                    <div class="col s12 m6">
                       Cuisine type: '<em>{{ recipe.cuisine_name }}</em>'<br>   
                    </div>
                    <div class="col s12 m6">
                        <h5>Recipe made By:</h5> '<b>{{ recipe.created_by }}</b>'<br>   
                    </div>
                     <div class="col s12 m4">
                        <img id="imgdata" src="{{ url_for('static', filename='img/') }}{{ recipe.file }}"
                        class="responsive-img"> 
                    </div>
                </div>

                <div class="row">
                    <div class="col s12 m6">
                        <div class="times_title">Prep Time:</div>
                        <div class="times">{{ recipe.prep_time }}</div>
                    </div>
                    <div class="col s12 m6">
                        <div class="times_title">Cook Time:</div>
                        <div class="times">{{ recipe.cook_time }}</div>
                    </div>
                </div>

                <div class="row">
                    <div class="col s12 m6">
                        <h5>Ingredients</h5>
                        <ul class="browser-default">
                            {% for ingredient in recipe.ingredients %}
                            <li class="list-style" style="list-style-type: square;">{{ ingredient }}</li>
                            {% endfor %}
                        </ul>
                    </div>
                    <div class="col s12 m6">
                        <h5>Prep steps</h5>
                        <ol class="browser-default">
                            {% for prep_step in recipe.prep_steps %}
                            <li class="list-style">{{ prep_step }}</li>
                            {% endfor %}
                        </ol>
                    </div>
                </div>
                
                 <div class="s12">
                    {% if session.user|lower == recipe.user_id|lower %}
                        <a href="{{ url_for('edit_recipe', recipe_id=recipe._id) }}"
                            class="waves-effect waves-light btn-small button-style">Edit</a>
                        <a class="waves-effect waves-light btn-small red modal-trigger button-style" href="#modaldel">Delete</a>
                        
                        <!-- Modal Structure -->

                        <div id="modaldel" class="modal">
                            <div class="modal-content">
                                <h4>Are you sure you want to delete this recipe?</h4>
                            </div>
                            <div class="modal-footer">
                                <a href="{{ url_for('delete_recipe', recipe_id=recipe._id) }}"
                                    class="modal-close waves-effect waves-light btn-small red button-style">Delete</a>
                                <a href="{{ url_for('get_recipes') }}"
                                    class="modal-close waves-effect waves-light btn-small button-style">Cancel</a>
                            </div>
                        </div>
                    {% endif %}
                </div>
                </fieldset>
                </form>
            </div>

            {% endif %}
            
            {% endfor %}


{% endblock %}